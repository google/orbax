# proto-file: //orbax/export/protos/oex_orchestration.proto
# proto-message: Pipelines
name_to_pipeline {
  key: "__MODEL_FUNCTION_NAME__"
  value {
    signature {
      input {
        tuple {
          elements {
            tuple {
              elements {
                leaf {
                  tensor_type {
                    shape {
                      shape_with_known_rank {
                        dimension_sizes {
                          size: 28
                        }
                        dimension_sizes {
                          size: 28
                        }
                        dimension_sizes {
                          size: 1
                        }
                      }
                    }
                    dtype: f64
                  }
                }
              }
            }
          }
          elements {
            dict {
            }
          }
        }
      }
      output {
        leaf {
          tensor_type {
            shape {
              shape_with_known_rank {
                dimension_sizes {
                }
              }
            }
            dtype: f32
          }
        }
      }
    }
    named_signature {
      inputs {
        named_tensor_types {
          name: "__INPUT_NAME__"
          tensor_type {
            shape {
              shape_with_known_rank {
                dimension_sizes { size: 28 }
                dimension_sizes { size: 28 }
                dimension_sizes { size: 1 }
              }
            }
            dtype: f64
          }
        }
      }
    }
    model_functions {
      model_function_name: "__MODEL_FUNCTION_NAME__"
      weights_name: "__WEIGHTS_NAME__"
    }
    pre_processor_names: "__PRE_PROCESSOR_NAME__"
    post_processor_names: "__POST_PROCESSOR_NAME__"
    batch_options {
      batch_component: MODEL_FUNCTION
      max_batch_size: 16
      batch_timeout_micros: 100
      allowed_batch_sizes: 2
      allowed_batch_sizes: 4
      allowed_batch_sizes: 16
      disable_large_batch_splitting: true
      num_batch_threads: 4
      max_enqueued_batches: 300
      batch_padding_policy: PAD_UP
      low_priority_batch_options {
        max_batch_size: 16
        batch_timeout_micros: 200
        allowed_batch_sizes: 2
        allowed_batch_sizes: 4
        allowed_batch_sizes: 16
        max_enqueued_batches: 300
      }
    }
  }
}
